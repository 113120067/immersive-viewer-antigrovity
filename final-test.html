<!DOCTYPE html>
<html>
<head>
    <title>Final Test - Multiple Fallback Strategy</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f8f9fa; }
        .test-container { 
            background: white; 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        img { max-width: 300px; border: 3px solid #28a745; border-radius: 10px; }
        .status { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .loading { background-color: #d1ecf1; color: #0c5460; }
        .url-info { font-size: 12px; color: #666; margin: 5px 0; word-break: break-all; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Final Test - Multiple Fallback Strategy</h1>
    
    <div class="test-container">
        <h3>æ¸¬è©¦ 1: åŸå§‹è¤‡é›œ URL</h3>
        <div id="status1" class="status loading">è¼‰å…¥ä¸­...</div>
        <div class="url-info">URL: https://image.pollinations.ai/prompt/cute%20cartoon%20dog</div>
        <img id="img1" alt="Test 1">
    </div>
    
    <div class="test-container">
        <h3>æ¸¬è©¦ 2: ç°¡å–® URL</h3>
        <div id="status2" class="status loading">è¼‰å…¥ä¸­...</div>
        <div class="url-info">URL: https://image.pollinations.ai/prompt/dog</div>
        <img id="img2" alt="Test 2">
    </div>
    
    <div class="test-container">
        <h3>æ¸¬è©¦ 3: å¤šé‡å‚™ç”¨ç­–ç•¥æ¨¡æ“¬</h3>
        <div id="status3" class="status loading">è¼‰å…¥ä¸­...</div>
        <div id="currentUrl3" class="url-info">æº–å‚™æ¸¬è©¦...</div>
        <img id="img3" alt="Test 3">
    </div>

    <script>
        // ç°¡å–®æ¸¬è©¦
        function setupSimpleTest(imgId, statusId, url) {
            const img = document.getElementById(imgId);
            const status = document.getElementById(statusId);
            
            img.onload = function() {
                status.textContent = 'âœ… åœ–ç‰‡è¼‰å…¥æˆåŠŸï¼';
                status.className = 'status success';
            };
            
            img.onerror = function() {
                status.textContent = 'âŒ åœ–ç‰‡è¼‰å…¥å¤±æ•—';
                status.className = 'status error';
            };
            
            img.src = url;
        }
        
        // å¤šé‡å‚™ç”¨ç­–ç•¥æ¸¬è©¦
        function setupFallbackTest() {
            const img = document.getElementById('img3');
            const status = document.getElementById('status3');
            const urlDisplay = document.getElementById('currentUrl3');
            
            const urls = [
                'https://image.pollinations.ai/prompt/cute%20cartoon%20dog%20for%20kids',
                'https://image.pollinations.ai/prompt/cute%20cartoon%20dog',
                'https://image.pollinations.ai/prompt/dog'
            ];
            
            let currentIndex = 0;
            
            function tryNextUrl() {
                if (currentIndex >= urls.length) {
                    status.textContent = 'âŒ æ‰€æœ‰ URL éƒ½å¤±æ•—äº†';
                    status.className = 'status error';
                    urlDisplay.textContent = 'æ‰€æœ‰å‚™ç”¨æ–¹æ¡ˆéƒ½å·²å˜—è©¦';
                    return;
                }
                
                const currentUrl = urls[currentIndex];
                urlDisplay.textContent = `å˜—è©¦ URL ${currentIndex + 1}/${urls.length}: ${currentUrl}`;
                status.textContent = `è¼‰å…¥ä¸­... (å˜—è©¦ ${currentIndex + 1}/${urls.length})`;
                
                img.onload = function() {
                    status.textContent = `âœ… æˆåŠŸè¼‰å…¥ (ä½¿ç”¨å‚™ç”¨æ–¹æ¡ˆ ${currentIndex + 1})`;
                    status.className = 'status success';
                };
                
                img.onerror = function() {
                    currentIndex++;
                    setTimeout(tryNextUrl, 2000); // ç­‰å¾… 2 ç§’å¾Œå˜—è©¦ä¸‹ä¸€å€‹
                };
                
                img.src = currentUrl;
            }
            
            tryNextUrl();
        }
        
        // åŸ·è¡Œæ¸¬è©¦
        setupSimpleTest('img1', 'status1', 'https://image.pollinations.ai/prompt/cute%20cartoon%20dog');
        setupSimpleTest('img2', 'status2', 'https://image.pollinations.ai/prompt/dog');
        setupFallbackTest();
        
        console.log('ğŸ§ª All tests started');
    </script>
</body>
</html>