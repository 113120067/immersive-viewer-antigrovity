extends layout

block content
  .container.mt-4
    .row
      .col-md-8
        // ä½¿ç”¨çµ±è¨ˆå¡ç‰‡
        .card.border-primary.shadow
          .card-header.bg-primary.text-white
            h4.mb-0 
              i.fas.fa-chart-bar.me-2
              | ä½¿ç”¨é‡çµ±è¨ˆ
          .card-body
            // è¼‰å…¥ç‹€æ…‹
            .text-center.py-4#loadingStats
              .spinner-border.text-primary
              p.mt-2 è¼‰å…¥çµ±è¨ˆè³‡æ–™ä¸­...
            
            // çµ±è¨ˆå…§å®¹
            .d-none#statsContent
              // ä»Šæ—¥ä½¿ç”¨é‡
              .row.mb-4
                .col-md-6
                  .card.bg-light
                    .card-body.text-center
                      h5.text-primary ä»Šæ—¥ä½¿ç”¨é‡
                      h2.mb-1#todayCount 0
                      small.text-muted / <span id="todayLimit">0</span> å¼µ
                      .progress.mt-2
                        .progress-bar#todayProgress(role="progressbar" style="width: 0%")
                .col-md-6
                  .card.bg-light
                    .card-body.text-center
                      h5.text-success ä»Šæ—¥è²»ç”¨
                      h2.mb-1#todayCost $0.00
                      small.text-muted / $<span id="todayCostLimit">0.00</span>
                      .progress.mt-2
                        .progress-bar.bg-success#todayCostProgress(role="progressbar" style="width: 0%")
              
              // æœ¬æœˆä½¿ç”¨é‡
              .row.mb-4
                .col-md-6
                  .card.bg-light
                    .card-body.text-center
                      h5.text-info æœ¬æœˆä½¿ç”¨é‡
                      h2.mb-1#monthlyCount 0
                      small.text-muted / <span id="monthlyLimit">0</span> å¼µ
                      .progress.mt-2
                        .progress-bar.bg-info#monthlyProgress(role="progressbar" style="width: 0%")
                .col-md-6
                  .card.bg-light
                    .card-body.text-center
                      h5.text-warning æœ¬æœˆè²»ç”¨
                      h2.mb-1#monthlyCost $0.00
                      small.text-muted / $<span id="monthlyCostLimit">0.00</span>
                      .progress.mt-2
                        .progress-bar.bg-warning#monthlyCostProgress(role="progressbar" style="width: 0%")
              
              // ä½¿ç”¨ç‹€æ…‹
              .alert#usageAlert.d-none
                .d-flex.align-items-center
                  i.fas.fa-info-circle.me-2
                  span#usageMessage
      
      .col-md-4
        // é™åˆ¶è¨­å®šå¡ç‰‡
        .card.border-warning.shadow
          .card-header.bg-warning.text-dark
            h5.mb-0 
              i.fas.fa-cog.me-2
              | ä½¿ç”¨é™åˆ¶è¨­å®š
          .card-body
            .small
              h6.text-primary æ¯æ—¥é™åˆ¶
              ul.list-unstyled.mb-3
                li å€‹äºº: <strong id="dailyUserLimit">0</strong> å¼µåœ–ç‰‡
                li ç³»çµ±: <strong id="dailyGlobalLimit">0</strong> å¼µåœ–ç‰‡
                li è²»ç”¨: <strong>$<span id="dailyCostLimitDisplay">0.00</span></strong>
              
              h6.text-info æ¯æœˆé™åˆ¶
              ul.list-unstyled.mb-3
                li å€‹äºº: <strong id="monthlyUserLimit">0</strong> å¼µåœ–ç‰‡
                li ç³»çµ±: <strong id="monthlyGlobalLimit">0</strong> å¼µåœ–ç‰‡
                li è²»ç”¨: <strong>$<span id="monthlyCostLimitDisplay">0.00</span></strong>
              
              h6.text-success åœ–ç‰‡æˆæœ¬
              ul.list-unstyled.small
                li Standard 1024x1024: <strong>$0.040</strong>
                li Standard 1792x1024: <strong>$0.080</strong>
                li HD 1024x1024: <strong>$0.080</strong>
                li HD 1792x1024: <strong>$0.120</strong>
        
        // ç³»çµ±ç‹€æ…‹å¡ç‰‡
        .card.border-info.shadow.mt-3
          .card-header.bg-info.text-white
            h6.mb-0 
              i.fas.fa-server.me-2
              | ç³»çµ±ç‹€æ…‹
          .card-body
            .d-none#globalStatsContent
              .small
                h6.text-primary ä»Šæ—¥å…¨ç³»çµ±
                ul.list-unstyled.mb-2
                  li åœ–ç‰‡æ•¸: <strong id="globalTodayCount">0</strong>
                  li è²»ç”¨: <strong>$<span id="globalTodayCost">0.00</span></strong>
                
                h6.text-info æœ¬æœˆå…¨ç³»çµ±
                ul.list-unstyled
                  li åœ–ç‰‡æ•¸: <strong id="globalMonthlyCount">0</strong>
                  li è²»ç”¨: <strong>$<span id="globalMonthlyCost">0.00</span></strong>
        
        // æ¸¬è©¦åŠŸèƒ½ï¼ˆåƒ…é–‹ç™¼ç’°å¢ƒï¼‰
        .card.border-secondary.shadow.mt-3#testCard.d-none
          .card-header.bg-secondary.text-white
            h6.mb-0 
              i.fas.fa-flask.me-2
              | æ¸¬è©¦åŠŸèƒ½
          .card-body
            .small
              p.text-muted åƒ…é–‹ç™¼ç’°å¢ƒå¯ç”¨
              .d-grid.gap-2
                button.btn.btn-sm.btn-outline-primary#simulateBtn æ¨¡æ“¬ç”Ÿæˆ 1 å¼µåœ–ç‰‡
                button.btn.btn-sm.btn-outline-warning#simulate5Btn æ¨¡æ“¬ç”Ÿæˆ 5 å¼µåœ–ç‰‡

  // éŒ¯èª¤è¨Šæ¯
  .modal.fade#errorModal(tabindex="-1")
    .modal-dialog
      .modal-content
        .modal-header.bg-danger.text-white
          h5.modal-title éŒ¯èª¤
          button.btn-close(data-bs-dismiss="modal")
        .modal-body
          p#errorMessage
        .modal-footer
          button.btn.btn-secondary(data-bs-dismiss="modal") é—œé–‰

block scripts
  script(src="/js/usage-stats.js" type="module")
  script.
    // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      console.log('ğŸ“Š Usage Stats page loaded');
    });